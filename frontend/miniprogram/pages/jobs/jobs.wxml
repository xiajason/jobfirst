<!--jobs.wxml-->
<view class="container">
  <!-- ç­›é€‰å™¨ -->
  <view class="filter-section">
    <view class="filter-tabs">
      <view 
        class="filter-tab {{currentFilter === 'all' ? 'active' : ''}}" 
        bindtap="setFilter" 
        data-type="all"
      >
        å…¨éƒ¨
      </view>
      <view 
        class="filter-tab {{currentFilter === 'recommend' ? 'active' : ''}}" 
        bindtap="setFilter" 
        data-type="recommend"
      >
        æ¨è
      </view>
      <view 
        class="filter-tab {{currentFilter === 'nearby' ? 'active' : ''}}" 
        bindtap="setFilter" 
        data-type="nearby"
      >
        é™„è¿‘
      </view>
      <view 
        class="filter-tab {{currentFilter === 'latest' ? 'active' : ''}}" 
        bindtap="setFilter" 
        data-type="latest"
      >
        æœ€æ–°
      </view>
    </view>
    
    <view class="filter-options">
      <view class="filter-option" bindtap="showLocationPicker">
        <text class="filter-label">ğŸ“ {{selectedLocation || 'åœ°ç‚¹'}}</text>
        <icon type="arrow" size="12" color="#999"></icon>
      </view>
      <view class="filter-option" bindtap="showSalaryPicker">
        <text class="filter-label">ğŸ’° {{selectedSalary || 'è–ªèµ„'}}</text>
        <icon type="arrow" size="12" color="#999"></icon>
      </view>
      <view class="filter-option" bindtap="showExperiencePicker">
        <text class="filter-label">ğŸ’¼ {{selectedExperience || 'ç»éªŒ'}}</text>
        <icon type="arrow" size="12" color="#999"></icon>
      </view>
    </view>
  </view>

  <!-- æœç´¢æ¡† -->
  <view class="search-section">
    <view class="search-box">
      <view class="search-input-wrapper">
        <icon type="search" size="16" color="#999"></icon>
        <input 
          class="search-input" 
          placeholder="æœç´¢èŒä½ã€å…¬å¸ã€æŠ€èƒ½" 
          value="{{searchKeyword}}"
          bindinput="onSearchInput"
          bindconfirm="onSearch"
        />
      </view>
    </view>
  </view>

  <!-- èŒä½åˆ—è¡¨ -->
  <view class="job-list" wx:if="{{jobs.length > 0}}">
    <view 
      class="job-item card" 
      wx:for="{{jobs}}" 
      wx:key="id"
      bindtap="navigateToJobDetail"
      data-job="{{item}}"
    >
      <view class="job-header">
        <view class="job-title">{{item.title}}</view>
        <view class="job-salary text-primary">{{item.salary}}</view>
      </view>
      
      <view class="job-company">{{item.company}}</view>
      
      <view class="job-tags">
        <text class="tag tag-primary" wx:for="{{item.tags}}" wx:key="*this" wx:for-item="tag">{{tag}}</text>
      </view>
      
      <view class="job-meta">
        <text class="job-location">ğŸ“ {{item.location}}</text>
        <text class="job-experience">ğŸ’¼ {{item.experience}}</text>
        <text class="job-education">ğŸ“ {{item.education}}</text>
      </view>
      
      <view class="job-footer">
        <view class="job-time">{{item.publishTime}}</view>
        <view class="job-actions">
          <button 
            class="btn btn-secondary btn-sm" 
            catchtap="toggleFavorite" 
            data-job="{{item}}"
          >
            {{item.isFavorite ? 'â¤ï¸' : 'ğŸ¤'}}
          </button>
          <button 
            class="btn btn-primary btn-sm" 
            catchtap="applyJob" 
            data-job="{{item}}"
          >
            ç«‹å³æŠ•é€’
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- ç©ºçŠ¶æ€ -->
  <view class="empty-container" wx:if="{{jobs.length === 0 && !loading}}">
    <view class="empty-icon">ğŸ”</view>
    <view class="empty-text">æš‚æ— ç›¸å…³èŒä½</view>
    <view class="empty-desc">è¯•è¯•è°ƒæ•´ç­›é€‰æ¡ä»¶æˆ–æœç´¢å…¶ä»–å…³é”®è¯</view>
  </view>

  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <view class="loading-text">åŠ è½½ä¸­...</view>
  </view>

  <!-- åŠ è½½æ›´å¤š -->
  <view class="load-more" wx:if="{{hasMore && !loading}}">
    <button class="btn btn-secondary" bindtap="loadMore">åŠ è½½æ›´å¤š</button>
  </view>
</view>

<!-- åœ°ç‚¹é€‰æ‹©å™¨ -->
<picker 
  mode="region" 
  bindchange="onLocationChange" 
  wx:if="{{showLocationPicker}}"
>
  <view class="picker-placeholder">é€‰æ‹©åœ°ç‚¹</view>
</picker>

<!-- è–ªèµ„é€‰æ‹©å™¨ -->
<picker 
  mode="selector" 
  range="{{salaryOptions}}" 
  bindchange="onSalaryChange"
  wx:if="{{showSalaryPicker}}"
>
  <view class="picker-placeholder">é€‰æ‹©è–ªèµ„</view>
</picker>

<!-- ç»éªŒé€‰æ‹©å™¨ -->
<picker 
  mode="selector" 
  range="{{experienceOptions}}" 
  bindchange="onExperienceChange"
  wx:if="{{showExperiencePicker}}"
>
  <view class="picker-placeholder">é€‰æ‹©ç»éªŒ</view>
</picker>
